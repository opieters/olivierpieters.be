---
layout: post
title:  "How this Website Came to Be"
tags:   [Jekyll, website, Cactus]
draft: true
---

Deciding to build a personal website and actually building one is a very different thing. When I started building a personal website, which I think is a must for everyone in electronics and computer sciences, I thought "how hard can it be?" The fact is that creating something I genuinely liked, was a _lot_ harder than it seemed.

First I stared a search: "How to build a personal website" in Google. The answer was less straight forward than it seemed. I had some experience with Ruby On Rails (RoR or simply Rails), but the setup had too much server-side processing for my linking. I wanted something that could load very fast and have little to no problems with attacks on the server or exploits. So I decided to create a *static website*.

## A Static Website?

Definition of a static website [according to Wikipedia][static-website-definition]:

> Static web page: is delivered to the user exactly as stored. A static web page (sometimes called a flat page/stationary page) is a web page that is delivered to the user exactly as stored, in contrast to dynamic web pages which are generated by a web application.

This meant I was not going to be able to have things such as comments or guest logs or user accounts (in the usual way). In the beginning the fact  that comments were not possible was a big disadvantage, but the advantages outweighed the disadvantages. And thus I stated with the search for a tool that would allow me to efficiently create a website/blog from scratch.

## In the Beginning: Cactus

I personally really like the Python programming language and chose for the Python based [cactus][cacaus-github] static website generator. But when creating several blog post and adding more and more features, the HTML-template based setup did not satisfy my needs. So I gave Pelican a try, but did not really like the way it worked and handles themes.

Since I did not really find anything I really linked that was Python based, I started looking outside the world of Python based tools and found [Jekyll][jekyll-site]. Jekyll is Ruby based and has a lot of features to like. The main disadvantage is that it uses Ruby as its main programming language. I am not really fond of Ruby, but since I do not need to interface with Ruby directly, this is not really an issue. Some awesome things about Jekyll: very active development, a lot of plugins that add additional functionality, Liquid integration, Markdown support and GitHub Pages integration.

## Creating a Jekyll Website

Because I already created some content in pure HTML, needed to convert that first to Markdown. A useful tool was [to-markdown][html-to-markdown]. Some additional editing was required, but that was much less than a manual conversion to Markdown from HTML.

After conversion, I could start writing my blog and add additional pages. Initially, I wanted to do a multi-lingual blog (Dutch and English), but due to the inner workings of Jekyll there is no default way of doing this. Since I did not have a translation for every page in place already, I decided to do this later on. This is a _to do_ feature, when the site has matured enough (and a good Jekyll plugin has arisen).

So, writing a Jekyll version of all Markdown documents was pretty straight forward. All I had to do was move the title to the _front matter_ and add a date to the publication. The font matter is a header-like section of a document with some basic information about the page that can be used for e.g. the HTML `title` tag, tags, dates, conditional CSS/JS includes etc.

A basic font matter looks like this:
{{< highlight liquid >}}
---
title: A Title Should Be Here
date: year-month-date hour:minute:second
---

The actual content.
{{< /highlight >}}

The basics of a how to setup a Jekyll website/blog is very well described in the [Jekyll documentation][jekyll-docs].

## Adding More Functionality To Jekyll

### Compiled LaTeX output as SVG images

When writing some of the LaTeX posts, I wanted to display the formatted PDF output. Non-math output posed a problem because I wanted to use SVG images since they offer supreme display quality. But this was not supported by the [only LaTeX plugin][latex-plugin] I could find. So I decided to use a little hack.

The hack consists of [a Python script][latex-python] in combination with the `_includes` folder in Jekyll. What I do is add the LaTeX snippets as individual `.tex` files in the `_includes` folder. A Python script searches for files with the `.tex` extension, adds the preamble, compiles them to PDF and converts them to SVG. These SVG images are then saved to a folder in the `assets` directory. The advantage of using the `_includes` folder, it that I can include the source code directly into my posts.

This hack works but it's not very elegant. One day I plan to rewrite the [PNG latex plugin][latex-plugin] to produce SVG output files without the need to store something in the `_includes` directory.

### JS libraries

Once you start writing more and more posts, you will discover the need to add additional JS libraries. But including those in the global `head` HTML tag, will reduce performance since you always load all these unused libraries (and CSS files). To solve this issue, we can use a `support` YAML tag in the front matter of our Liquid pages.

Adding the following to our YAML front matter to use both [jquery][jquery] and [mathjax][mathjax]:

{{< highlight liquid >}}
support: [jquery, mathjax]
{{< /highlight >}}

Then we can use the following to conditionally include content in the HTML `head` tag:

{{< highlight liquid >}}
{% if page.support contains 'jquery' %}
<script src="/path/to/jquery/jquery.min.js" type="text/javascript"></script>
{% endif %}

{% if page.support contains 'mathjax' %}
<!-- based on http://www.idryman.org/blog/2012/03/10/writing-math-equations-on-octopress/-->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$$', '$$'] ],
    displayMath: [ ['$$$', '$$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
{% endif %}
{{< /highlight >}}

## The Configuration File

The Jekyll configuration file is a very important file. Taking the time to propperly setup this file is important since unexpected things might happen otherwise. Part of my `_config.yml` file is included below:

{{< highlight yaml >}}
# Site settings
name: Olivier Pieters
description: Olivier Pieters' personal website and blog.
baseurl: "" # the subpath of your site, e.g. /blog/
url: "//www.olivierpieters.be" # the base hostname (// makes the hostname protocol invariant)

# social settings
twitter_username: OlivierPieters
# add more social links here

# jekyll config
highlighter: rouge
exclude:
  - public_html
  - upload.sh
  - upload.py
timezone: Europe/Brussels
gems: [jekyll-paginate, jekyll-coffeescript, jekyll-archives, jekyll-assets, jekyll_inline_highlight]
markdown: kramdown
permalink: /blog/:year/:month/:day/:title.html # set post permalink

# analytics
analytics: false

# pagination options
paginate: 10
paginate_path: "/blog/page:num/"

# create additional collections
collections:
    projects:
        output: true
        permalink: /projects/:title.html
{{< /highlight >}}

Most of the settings are quite straightforward. Some important things include the protocol invariant `url` variable. If you have both an HTTP and HTTPS version of your website this is important to set correctly. Also important is the permalink for your blogpost entries: I use the default way, but if you don't like the date inclusion in the link, this is the place to edit it. Once you have deployed your blog. You mustn't change this setting to avoid dead references to your website from other sites.

One final important thing is the `exclude` variable. I have an `upload.sh` bash script that contains my credentials to upload content obviously I don't want to publish any of this to other people. Jekyll will (by default) copy the file to the `_site` path and when I upload, my credentials will be available online. This cannot happen, so we must tell Jekyll to stay away from this file.

That rounds up how the basics of my personal website came to be. I have already posted more detailed information (e.g. [a layout update][layout-update]) and will post additional content in the future to highlight how I use Jekyll. 

[static-website-definition]: https://en.wikipedia.org/wiki/Static_web_page
[cacaus-github]: https://github.com/koenbok/cactus
[jekyll-site]: http://jekyllrb.com
[jekyll-docs]: http://jekyllrb.com/docs/home/
[html-to-markdown]: https://domchristie.github.io/to-markdown/
[latex-plugin]: https://github.com/fgalindo/jekyll-liquid-latex-plugin
[latex-python]: https://gist.github.com/opieters/ad7abe0cc6a1f15b88a1
[mathjax]: https://www.mathjax.org
[jquery]: https://jquery.com
[layout-update]: {{< ref "/blog/large-website-layout-modifications.md" >}}
